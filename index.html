<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-locomotion@0.2.0/dist/aframe-locomotion.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/a-super-sky@1.1.1/super-sky.js"></script>
    <script src="https://unpkg.com/aframe-extras@7.5.4/dist/aframe-extras.min.js"></script>
    <script
        src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v$npm_package_version/dist/aframe-physics-system.min.js"></script>
</head>

<body>
    <a-scene nav-mesh-strategy id="scene" xr-mode-ui="enterAREnabled: false"
        fog="type: exponential; color: #85aac7; far: 346.667; near: 0; density: 0.02">
        <a-entity id="nav" position="0 21.44262 -27.325" gltf-model="navmesh.glb" nav-mesh animation-mixer></a-entity>
        <!-- Camera rig -->
        <a-entity id="rig" gravity>
            <a-camera id="camera" camera="fov: 90; zoom: 1" nav-mesh-constrained="offset: 0 1.6 0">
                <a-text id="subtitles" value="hi" position="0.06211 -1 -1.20656"
                    text="align: center; anchor: center; side: double; value: subtitles; width: 1.52;"></a-text>
            </a-camera>

            <!-- Hands -->
            <a-entity laser-controls="hand: left" smooth-locomotion="target: #rig; reference: #camera"
                raycaster="objects: .interactable; far: 10000">
            </a-entity>
            <a-entity laser-controls="hand: right" smooth-turn="target: #rig; reference: #camera; turnSpeed: 180"
                raycaster="objects: .interactable; far: 10000">
            </a-entity>
        </a-entity>

        <a-super-sky orbitduration='1000000000000000000000' targetfpd="0" startpercent="0.1"
            groundcolor="#000000"></a-super-sky>

        <a-box id="box" class="interactable" material="color: #ffffff" position="0 1.527 -2.461" color="red"></a-box>

        <a-entity id="tree" gltf-model="tree.glb" animation-mixer="clip: Idle;">
        </a-entity>

        <a-light id="light" light="color: #ffd35c" position="0 2.53431 -3.05091"></a-light>
    </a-scene>

    <script>
        const scene = document.querySelector('a-scene');
        const text = document.getElementById('subtitles');
        const box = document.getElementById('box');

        scene.addEventListener('enter-vr', () => {
            // Move text or change visibility in VR
            text.setAttribute('position', "0.06211 -0.4 -2"); // lower and closer in VR
        });

        scene.addEventListener('exit-vr', () => {
            // Reset or change for non-VR mode
            text.setAttribute('position', '0.06211 -1 -1.20656'); // original position
        });

        box.addEventListener('click', () => {
            box.setAttribute('color', '#FF0000');
        });

        box.addEventListener('mouseenter', () => {
            box.setAttribute('color', '#00FF00');
        });

        box.addEventListener('mouseleave', () => {
            box.setAttribute('color', '#0000FF');
        });
    </script>
</body>

</html>